main:
  params: [args]
  steps:
    - thumbnailCall:
        call: http.post
        args:
          url: ${args.thumbnailUri}
          auth:
            type: OIDC
          body:
              gcsImageUri: ${args.gcsImageUri}
        result: thumbnailResponse
    - collageCall:
        call: http.get
        args:
          url: ${args.collageUri}
          auth:
            type: OIDC
        result: collageResponse
    - garbageCollectorCall:
        call: http.post
        args:
          url: ${args.garbageCollectorUri}
          auth:
            type: OIDC
          body:
              gcsImageUri: ${args.gcsImageUri}
        result: garbageCollectorResponse
    - returnResult:
        return:
          thumbnailCode: ${thumbnailResponse.code}
          collageCode: ${collageResponse.code}
          garbageCollectorCode: ${garbageCollectorResponse.code}
